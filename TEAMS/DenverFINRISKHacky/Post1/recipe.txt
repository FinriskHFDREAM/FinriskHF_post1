Bootstrap: docker
# Use Bioconductor as base image
FROM: bioconductor/bioconductor_docker:devel

%labels
  TDL, DenverFINRISKHacky post-challenge submission

%help
  DenverFINRISKHacky singularity image

%post

# Install CRAN packages
R --slave -e 'install.packages(c("Matrix", "glmnet", "ecodist", "vegan", "survival"))'

# Install Bioconductor packages using the versions available at Jan 2023
R --slave -e 'BiocManager::install(version = "3.16")'
R --slave -e 'BiocManager::install("mia", version = "1.7.4")'
R --slave -e 'BiocManager::install(c("microbiome", "phyloseq", "TreeSummarizedExperiment"))'

%runscript
  exec Rscript model.R "$@"
  
